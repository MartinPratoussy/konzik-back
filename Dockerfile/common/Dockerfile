FROM debian:latest as builder

# Install OpenJDK 17
RUN apt-get update && \
    apt-get install -y apt-utils curl openjdk-17-jdk openjdk-17-jre && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Installer Maven
ENV MAVEN_VERSION=3.6.3 \
    MAVEN_HOME=/usr/local/maven

RUN mkdir -p $MAVEN_HOME \
  && curl -fsSL http://www-eu.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz | tar -xzC $MAVEN_HOME --strip-components=1 \
  && ln -s $MAVEN_HOME/bin/mvn /usr/local/bin/mvn


# Ajouter konzik-back-dev.tar dans le dossier app
ADD ../../ /app/

# Cr√©er un dossier APPLI
RUN mkdir /app/APPLI

WORKDIR /app/Common
RUN mvn --version
